(()=>{var e={};e.id=759,e.ids=[759],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},76630:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=i(50482),a=i(69108),n=i(62563),r=i.n(n),l=i(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let c=["",{children:["loan-application",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,48015)),"C:\\Users\\rmill\\Documents\\unipay02\\unipay\\app\\loan-application\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,69695)),"C:\\Users\\rmill\\Documents\\unipay02\\unipay\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\rmill\\Documents\\unipay02\\unipay\\app\\loan-application\\page.tsx"],p="/loan-application/page",u={require:i,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/loan-application/page",pathname:"/loan-application",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94113:(e,t,i)=>{Promise.resolve().then(i.bind(i,20069))},20069:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var s=i(95344),a=i(3729),n=i(8428),r=i(64132),l=i(48414);i(50669);let o=[{label:"Persona Verification"},{label:"Financial Status"},{label:"Visa Information"},{label:"Prior Academic History"},{label:"Current Education"},{label:"Review and Submit"}];function c(){let e=(0,n.useRouter)(),[t,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(0),[p,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!0),[j,g]=(0,a.useState)([{id:1,universityName:"",degreeType:"",majorField:"",gpa:""}]),[v,m]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[b,S]=(0,a.useState)(""),[N,C]=(0,a.useState)(""),[P,w]=(0,a.useState)(""),[A,q]=(0,a.useState)(""),[E,_]=(0,a.useState)(""),[U,V]=(0,a.useState)(""),[k,I]=(0,a.useState)(""),[D,T]=(0,a.useState)(""),[F,M]=(0,a.useState)(""),[O,L]=(0,a.useState)(""),[W,G]=(0,a.useState)(""),[R,Y]=(0,a.useState)(""),[$,J]=(0,a.useState)(""),[H,B]=(0,a.useState)(""),[X,z]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(""),[K,ee]=(0,a.useState)(""),[et,ei]=(0,a.useState)("");async function es(e,t){try{let i=await fetch("/api/application_submitted",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,app_id:t})}),s=await i.json();console.log("Response from server:",s)}catch(e){console.error("Error sending application submitted request:",e)}}(0,a.useEffect)(()=>{let t=r.I.onAuthStateChanged(t=>{t?i(!1):e.push("/login")});return()=>t()},[e]);let ea=async()=>{try{let t=r.I.currentUser;if(!t){alert("No user is logged in. Unable to save data.");return}let i={step0Verified:h,step3priorEducations:j,step1totalAcademicFunding:v,step1fundsAllocation:f,step1externalFunding:b,step1isEmployed:N,step2visaStatus:P,step2visaType:A,step2fullNameOnVisa:E,step2visaNumber:U,step2visaIssuanceDate:k,step2visaExpirationDate:D,step2sevisId:F,step4currentUniversityName:O,step4isCurrentlyAttending:W,step4expectedGraduationDate:R,step4startDate:$,step4degreeTypeCurrent:H,step4majorFieldCurrent:X,step4gpaCurrent:Q,step4estimatedCostOfAttendance:K,step4isReceivingScholarship:et,createdAt:new Date().toISOString()},s=await (0,l.ET)((0,l.hJ)(r.db,"users",t.uid,"loanApplications"),i);alert("Application data saved to Firestore!");let a=s.id;es(t.uid,a),e.push("/loan-offer")}catch(e){console.error("Error saving application data:",e),alert("Could not save application data. Check console for details.")}},en=()=>{if(p){er();return}let e=document.createElement("script");e.src="https://cdn.withpersona.com/dist/persona-v5.1.2.js",e.integrity="sha384-nuMfOsYXMwp5L13VJicJkSs8tObai/UtHEOg3f7tQuFWU5j6LAewJbjbF5ZkfoDo",e.crossOrigin="anonymous",e.onload=()=>{u(!0),er()},document.body.appendChild(e)},er=()=>{let e=process.env.NEXT_PUBLIC_PERSONA_TEMPLATE_ID,t=process.env.NEXT_PUBLIC_PERSONA_ENVIRONMENT_ID;if(!e||!t){console.error("Persona environment variables are not set.");return}let i=new window.Persona.Client({templateId:e,environmentId:t,onReady:()=>i.open(),onComplete:({status:e})=>{"completed"===e?x(!0):alert("Verification not successful.")}})},el=e=>{if(e>0&&!h){alert("Please complete Persona Verification first.");return}d(e)},eo=e=>{g(t=>t.filter(t=>t.id!==e))},ec=(e,t,i)=>{g(s=>{let a=[...s];return a[e]={...a[e],[t]:i},a})};return t?s.jsx("div",{className:"loan-application-loading",children:"Loading..."}):s.jsx("div",{className:"loan-application-container",children:(0,s.jsxs)("div",{className:"loan-application-content",children:[s.jsx("aside",{className:"loan-application-sidebar",children:(0,s.jsxs)("div",{className:"progress-container",children:[s.jsx("div",{className:"progress-line"}),s.jsx("div",{className:"progress-line-filled",style:{height:`${c/(o.length-1)*100}%`}}),o.map((e,t)=>{let i=t<=c;return(0,s.jsxs)("div",{className:"step-wrapper",children:[s.jsx("button",{className:`step-circle ${i?"completed":""}`,onClick:()=>el(t),"aria-label":`Step ${t+1}: ${e.label}`,children:s.jsx("span",{children:t+1})}),s.jsx("span",{className:"step-label",children:e.label})]},t)})]})}),(0,s.jsxs)("main",{className:"loan-application-main",children:[s.jsx("h1",{className:"loan-application-step-title",children:o[c].label}),0===c&&s.jsx("div",{className:"persona-verification-container",children:h?(0,s.jsxs)("span",{children:[s.jsx("p",{children:"You have successfully verified your identity!"}),s.jsx("button",{className:"persona-button",onClick:en,children:"Verify Again"})]}):(0,s.jsxs)("span",{children:[s.jsx("p",{children:"Click the button below to verify your identity securely."}),s.jsx("button",{className:"persona-button",onClick:en,children:"Start Verification"})]})}),1===c&&(0,s.jsxs)("div",{className:"financial-status-step",children:[s.jsx("h2",{children:"Your Financial Status"}),s.jsx("p",{children:"The information provided is collected to assess your financial eligibility, ensure the accuracy of your loan application, and comply with legal and regulatory requirements. This helps us process your application fairly and transparently while safeguarding your data."}),s.jsx("hr",{}),s.jsx("h3",{children:"Academic Funding"}),(0,s.jsxs)("label",{children:["Provide the total academic funding you are looking to receive from this loan",s.jsx("br",{}),s.jsx("input",{type:"number",placeholder:"$",value:v,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("label",{children:["What will these funds be allocated towards?",s.jsx("br",{}),(0,s.jsxs)("select",{value:f,onChange:e=>y(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select an option"}),s.jsx("option",{value:"Tuition",children:"Tuition and other academic expenses on my university billing"}),s.jsx("option",{value:"Housing",children:"Housing expenses"}),s.jsx("option",{value:"Living",children:"Living expenses"})]})]}),(0,s.jsxs)("label",{children:["How much funding will you receive outside of this loan to support your study abroad?",s.jsx("br",{}),s.jsx("input",{type:"number",placeholder:"$",value:b,onChange:e=>S(e.target.value)})]}),(0,s.jsxs)("label",{children:["Are you currently employed?",s.jsx("br",{}),(0,s.jsxs)("select",{value:N,onChange:e=>C(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select"}),s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]})]}),s.jsx("hr",{}),s.jsx("h3",{children:"Financial Verification Documents"}),s.jsx("p",{children:s.jsx("strong",{children:"Proof of Employment"})}),(0,s.jsxs)("p",{children:["Provide the most recent form of one of the following:",(0,s.jsxs)("ul",{children:[s.jsx("li",{children:"Salary slips"}),s.jsx("li",{children:"Tax returns"})]})]}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Provide one of the following:"}),(0,s.jsxs)("ul",{children:[s.jsx("li",{children:"A bank statement in English showing adequate liquid funds exist in the account(s) to cover the cost of your program."}),s.jsx("li",{children:"A certified letter in English from a financial institution stating adequate liquid funds exist in the account(s) to cover the cost of your program."}),s.jsx("li",{children:"A sponsor letter in English stating that adequate funds are available to cover the cost of your program."})]})]}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})})]}),2===c&&(0,s.jsxs)("div",{className:"visa-status-step",children:[s.jsx("h2",{children:"Visa Status"}),s.jsx("p",{children:"Let’s make sure everything is in order! We want to make sure your time studying abroad is as smooth as possible."}),s.jsx("h3",{children:"Visa Information"}),(0,s.jsxs)("label",{children:["What is the current status of your Visa?",s.jsx("br",{}),(0,s.jsxs)("select",{value:P,onChange:e=>w(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select your Visa status"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"in-process",children:"In Process"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"not-applied",children:"Not Applied Yet"})]})]}),(0,s.jsxs)("label",{children:["What is your Visa type?",s.jsx("br",{}),(0,s.jsxs)("select",{value:A,onChange:e=>q(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select your Visa type"}),s.jsx("option",{value:"F-1",children:"F-1"}),s.jsx("option",{value:"J-1",children:"J-1"}),s.jsx("option",{value:"M-1",children:"M-1"}),s.jsx("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("label",{children:["What is the full name as it appears on the Visa",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"Full Name on Visa",value:E,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("label",{children:["Visa number",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"Visa Number",value:U,onChange:e=>V(e.target.value)})]}),(0,s.jsxs)("label",{children:["Issuance Date:",s.jsx("br",{}),s.jsx("input",{type:"date",value:k,onChange:e=>I(e.target.value)})]}),(0,s.jsxs)("label",{children:["Expiration Date:",s.jsx("br",{}),s.jsx("input",{type:"date",value:D,onChange:e=>T(e.target.value)})]}),s.jsx("h4",{children:"Verify your Visa"}),s.jsx("p",{children:"Provide a picture or PDF of your visa"}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})}),(0,s.jsxs)("label",{children:["SEVIS ID",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"Enter SEVIS ID found on your I-20 or DS-2019 form",value:F,onChange:e=>M(e.target.value)})]})]}),3===c&&(0,s.jsxs)("div",{className:"prior-academic-history-step",children:[s.jsx("h2",{children:"Your Academic Status"}),s.jsx("p",{children:"We’re still getting to know you! In order to see your growth potential, provide a few details about your academics."}),s.jsx("h3",{children:"Prior Education"}),j.map((e,t)=>(0,s.jsxs)("div",{className:"academic-history-card",children:[t>0&&s.jsx("button",{type:"button",className:"remove-card-button",onClick:()=>eo(e.id),children:"X"}),(0,s.jsxs)("label",{children:["University name",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. University of Example",value:e.universityName,onChange:e=>ec(t,"universityName",e.target.value)})]}),(0,s.jsxs)("label",{children:["Degree type",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. Bachelor's, Master's",value:e.degreeType,onChange:e=>ec(t,"degreeType",e.target.value)})]}),(0,s.jsxs)("label",{children:["Major/Field of study",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. Computer Science",value:e.majorField,onChange:e=>ec(t,"majorField",e.target.value)})]}),(0,s.jsxs)("label",{children:["GPA",s.jsx("br",{}),(0,s.jsxs)("select",{value:e.gpa,onChange:e=>ec(t,"gpa",e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select GPA"}),s.jsx("option",{value:"4.0",children:"4.0"}),s.jsx("option",{value:"3.5",children:"3.5"}),s.jsx("option",{value:"3.0",children:"3.0"}),s.jsx("option",{value:"2.5",children:"2.5"})]})]}),s.jsx("h4",{children:"Proof of Attendance"}),s.jsx("p",{children:"Provide a university transcript covering the entirety of your studies at this particular university"}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})}),s.jsx("h4",{children:"Diploma/Certificate of Completion"}),s.jsx("p",{children:"If degree was completed, provide an official university document stating degree completion"}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})})]},e.id)),s.jsx("button",{type:"button",className:"add-university-button",onClick:()=>{g(e=>[...e,{id:Date.now(),universityName:"",degreeType:"",majorField:"",gpa:""}])},children:"+ Add a university"})]}),4===c&&(0,s.jsxs)("div",{className:"current-education-step",children:[s.jsx("h2",{children:"Where are you going now"}),s.jsx("p",{children:"We can’t wait to see where you’re off to. Let’s get a better understanding of what your future looks like!"}),s.jsx("h3",{children:"Current Education"}),(0,s.jsxs)("div",{className:"academic-history-card",children:[(0,s.jsxs)("label",{children:["University name",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. University of Example",value:O,onChange:e=>L(e.target.value)})]}),(0,s.jsxs)("label",{children:["Are you currently attending this university?",s.jsx("br",{}),(0,s.jsxs)("select",{value:W,onChange:e=>G(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select"}),s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]})]}),(0,s.jsxs)("label",{children:["Expected graduation date",s.jsx("br",{}),s.jsx("input",{type:"date",value:R,onChange:e=>Y(e.target.value)})]}),(0,s.jsxs)("label",{children:["Start date",s.jsx("br",{}),s.jsx("input",{type:"date",value:$,onChange:e=>J(e.target.value)})]}),(0,s.jsxs)("label",{children:["Degree type",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. Bachelor's, Master's",value:H,onChange:e=>B(e.target.value)})]}),(0,s.jsxs)("label",{children:["Major/Field of study",s.jsx("br",{}),s.jsx("input",{type:"text",placeholder:"e.g. Computer Science",value:X,onChange:e=>z(e.target.value)})]}),(0,s.jsxs)("label",{children:["GPA",s.jsx("br",{}),(0,s.jsxs)("select",{value:Q,onChange:e=>Z(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select GPA"}),s.jsx("option",{value:"4.0",children:"4.0"}),s.jsx("option",{value:"3.5",children:"3.5"}),s.jsx("option",{value:"3.0",children:"3.0"}),s.jsx("option",{value:"2.5",children:"2.5"})]})]}),s.jsx("h4",{children:"Proof of Attendance"}),s.jsx("p",{children:"If currently attending, provide a university transcript covering the entirety of your studies at this particular university"}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})}),s.jsx("h4",{children:"Proof of Admission"}),s.jsx("p",{children:"If you are soon to attend this university, provide a letter of admissions provided by the school."}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})})]}),s.jsx("hr",{className:"section-divider"}),s.jsx("h2",{children:"How are we going to help you"}),s.jsx("p",{children:"We’re here to support you! Provide us with information that will help us uplift your educational journey."}),s.jsx("h3",{children:"University Billing"}),(0,s.jsxs)("label",{children:["Estimated Cost of Attendance",s.jsx("br",{}),s.jsx("input",{type:"number",placeholder:"What is the expected cost of attendance including housing?",value:K,onChange:e=>ee(e.target.value)})]}),(0,s.jsxs)("label",{children:["Are you receiving financial assistance from the university in the form of scholarship?",s.jsx("br",{}),(0,s.jsxs)("select",{value:et,onChange:e=>ei(e.target.value),children:[s.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select"}),s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]})]}),s.jsx("h4",{children:"Proof of Scholarship"}),(0,s.jsxs)("p",{children:["Provide one of the following:",(0,s.jsxs)("ul",{children:[s.jsx("li",{children:"Letter of scholarship"}),s.jsx("li",{children:"Scholarship billing statement"})]})]}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})}),s.jsx("h4",{children:"Proof of Cost of Attendance"}),s.jsx("p",{children:"Provide a university billing statement containing the total owed."}),s.jsx("div",{className:"upload-container",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.png"}),s.jsx("span",{children:"Upload files: .pdf, .jpg, .png"})]})})]}),5===c&&s.jsx("div",{className:"review-and-submit-step",children:s.jsx("p",{children:"Please review all the information you have entered before submitting."})}),(0,s.jsxs)("div",{className:"loan-application-step-navigation",children:[s.jsx("button",{type:"button",className:"back-button",disabled:0===c,onClick:()=>{d(e=>Math.max(e-1,0))},children:"Previous"}),c<o.length-1?s.jsx("button",{type:"button",className:"next-button",onClick:()=>{if(0===c&&!h){alert("Please complete Persona Verification first.");return}d(e=>Math.min(e+1,o.length-1))},children:"Next"}):s.jsx("button",{type:"button",className:"submit-button",onClick:ea,children:"Submit Application"})]})]})]})})}},48015:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>r});let s=(0,i(86843).createProxy)(String.raw`C:\Users\rmill\Documents\unipay02\unipay\app\loan-application\page.tsx`),{__esModule:a,$$typeof:n}=s,r=s.default},4998:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var s=i(70337);let a=e=>[{type:"image/png",sizes:"357x380",url:(0,s.fillMetadataSegment)(".",e.params,"icon.png")+"?45be5050d6408c13"}]},50669:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[638,483,337,875],()=>i(76630));module.exports=s})();